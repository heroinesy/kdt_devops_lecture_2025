<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #333; }
      .subtitle { font: 16px sans-serif; fill: #666; }
      .label { font: 14px sans-serif; fill: #333; }
      .small { font: 12px sans-serif; fill: #666; }
      .box { fill: #fff; stroke: #333; stroke-width: 2; }
      .old { fill: #2196f3; }
      .new { fill: #4caf50; }
      .traffic { fill: #ff9800; }
      .monitor { fill: #f44336; }
      .arrow { fill: none; stroke: #666; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">쿠팡 로켓배송 카나리 배포 전략</text>
  <text x="400" y="55" text-anchor="middle" class="subtitle">점진적 트래픽 전환으로 무중단 배포 달성</text>
  
  <!-- Stage 1: 1% -->
  <g transform="translate(50, 80)">
    <text x="100" y="0" text-anchor="middle" class="label" font-weight="bold">Stage 1: 초기 배포 (1%)</text>
    
    <rect x="20" y="20" width="80" height="60" class="box traffic"/>
    <text x="60" y="45" text-anchor="middle" class="label" fill="#fff">사용자</text>
    <text x="60" y="65" text-anchor="middle" class="small" fill="#fff">100%</text>
    
    <rect x="130" y="20" width="80" height="60" class="box old"/>
    <text x="170" y="45" text-anchor="middle" class="label" fill="#fff">기존 v1</text>
    <text x="170" y="65" text-anchor="middle" class="small" fill="#fff">99%</text>
    
    <rect x="130" y="100" width="80" height="60" class="box new"/>
    <text x="170" y="125" text-anchor="middle" class="label" fill="#fff">신규 v2</text>
    <text x="170" y="145" text-anchor="middle" class="small" fill="#fff">1%</text>
    
    <path d="M 100 50 L 130 40" class="arrow" stroke-width="4"/>
    <path d="M 100 50 L 130 130" class="arrow" stroke-width="0.5"/>
    
    <text x="100" y="185" text-anchor="middle" class="small">⏱ 30분 모니터링</text>
  </g>
  
  <!-- Stage 2: 10% -->
  <g transform="translate(250, 80)">
    <text x="100" y="0" text-anchor="middle" class="label" font-weight="bold">Stage 2: 확대 (10%)</text>
    
    <rect x="20" y="20" width="80" height="60" class="box traffic"/>
    <text x="60" y="45" text-anchor="middle" class="label" fill="#fff">사용자</text>
    <text x="60" y="65" text-anchor="middle" class="small" fill="#fff">100%</text>
    
    <rect x="130" y="20" width="80" height="60" class="box old"/>
    <text x="170" y="45" text-anchor="middle" class="label" fill="#fff">기존 v1</text>
    <text x="170" y="65" text-anchor="middle" class="small" fill="#fff">90%</text>
    
    <rect x="130" y="100" width="80" height="60" class="box new"/>
    <text x="170" y="125" text-anchor="middle" class="label" fill="#fff">신규 v2</text>
    <text x="170" y="145" text-anchor="middle" class="small" fill="#fff">10%</text>
    
    <path d="M 100 50 L 130 40" class="arrow" stroke-width="3.5"/>
    <path d="M 100 50 L 130 130" class="arrow" stroke-width="1"/>
    
    <text x="100" y="185" text-anchor="middle" class="small">⏱ 1시간 모니터링</text>
  </g>
  
  <!-- Stage 3: 50% -->
  <g transform="translate(450, 80)">
    <text x="100" y="0" text-anchor="middle" class="label" font-weight="bold">Stage 3: 절반 (50%)</text>
    
    <rect x="20" y="20" width="80" height="60" class="box traffic"/>
    <text x="60" y="45" text-anchor="middle" class="label" fill="#fff">사용자</text>
    <text x="60" y="65" text-anchor="middle" class="small" fill="#fff">100%</text>
    
    <rect x="130" y="20" width="80" height="60" class="box old"/>
    <text x="170" y="45" text-anchor="middle" class="label" fill="#fff">기존 v1</text>
    <text x="170" y="65" text-anchor="middle" class="small" fill="#fff">50%</text>
    
    <rect x="130" y="100" width="80" height="60" class="box new"/>
    <text x="170" y="125" text-anchor="middle" class="label" fill="#fff">신규 v2</text>
    <text x="170" y="145" text-anchor="middle" class="small" fill="#fff">50%</text>
    
    <path d="M 100 50 L 130 40" class="arrow" stroke-width="2"/>
    <path d="M 100 50 L 130 130" class="arrow" stroke-width="2"/>
    
    <text x="100" y="185" text-anchor="middle" class="small">⏱ 2시간 모니터링</text>
  </g>
  
  <!-- Stage 4: 100% -->
  <g transform="translate(650, 80)">
    <text x="75" y="0" text-anchor="middle" class="label" font-weight="bold">Stage 4: 완료</text>
    
    <rect x="20" y="20" width="80" height="60" class="box traffic"/>
    <text x="60" y="45" text-anchor="middle" class="label" fill="#fff">사용자</text>
    <text x="60" y="65" text-anchor="middle" class="small" fill="#fff">100%</text>
    
    <rect x="130" y="60" width="80" height="60" class="box new"/>
    <text x="170" y="85" text-anchor="middle" class="label" fill="#fff">신규 v2</text>
    <text x="170" y="105" text-anchor="middle" class="small" fill="#fff">100%</text>
    
    <path d="M 100 50 L 130 90" class="arrow" stroke-width="4"/>
    
    <text x="75" y="145" text-anchor="middle" class="small">✅ 배포 완료</text>
  </g>
  
  <!-- Monitoring Dashboard -->
  <g transform="translate(50, 280)">
    <text x="350" y="0" text-anchor="middle" class="label" font-weight="bold">실시간 모니터링 대시보드</text>
    
    <!-- Error Rate -->
    <rect x="20" y="20" width="160" height="120" class="box" fill="#e8f5e8"/>
    <text x="100" y="45" text-anchor="middle" class="label">에러율</text>
    
    <line x1="40" y1="120" x2="160" y2="120" stroke="#333" stroke-width="1"/>
    <line x1="40" y1="60" x2="40" y2="120" stroke="#333" stroke-width="1"/>
    
    <polyline points="40,115 70,110 100,108 130,107 160,105" 
              fill="none" stroke="#4caf50" stroke-width="2"/>
    <text x="100" y="140" text-anchor="middle" class="small" fill="#2e7d32">✅ 0.1% 유지</text>
    
    <!-- Response Time -->
    <rect x="200" y="20" width="160" height="120" class="box" fill="#e3f2fd"/>
    <text x="280" y="45" text-anchor="middle" class="label">응답시간</text>
    
    <line x1="220" y1="120" x2="340" y2="120" stroke="#333" stroke-width="1"/>
    <line x1="220" y1="60" x2="220" y2="120" stroke="#333" stroke-width="1"/>
    
    <polyline points="220,110 250,108 280,107 310,106 340,105" 
              fill="none" stroke="#2196f3" stroke-width="2"/>
    <text x="280" y="140" text-anchor="middle" class="small" fill="#1976d2">✅ 150ms 안정</text>
    
    <!-- CPU Usage -->
    <rect x="380" y="20" width="160" height="120" class="box" fill="#fff3e0"/>
    <text x="460" y="45" text-anchor="middle" class="label">CPU 사용률</text>
    
    <line x1="400" y1="120" x2="520" y2="120" stroke="#333" stroke-width="1"/>
    <line x1="400" y1="60" x2="400" y2="120" stroke="#333" stroke-width="1"/>
    
    <polyline points="400,100 430,98 460,95 490,93 520,90" 
              fill="none" stroke="#ff9800" stroke-width="2"/>
    <text x="460" y="140" text-anchor="middle" class="small" fill="#f57c00">✅ 45% 정상</text>
    
    <!-- Traffic -->
    <rect x="560" y="20" width="160" height="120" class="box" fill="#f3e5f5"/>
    <text x="640" y="45" text-anchor="middle" class="label">트래픽</text>
    
    <line x1="580" y1="120" x2="700" y2="120" stroke="#333" stroke-width="1"/>
    <line x1="580" y1="60" x2="580" y2="120" stroke="#333" stroke-width="1"/>
    
    <polyline points="580,115 610,110 640,100 670,85 700,70" 
              fill="none" stroke="#9c27b0" stroke-width="2"/>
    <text x="640" y="140" text-anchor="middle" class="small" fill="#7b1fa2">✅ 점진적 증가</text>
  </g>
  
  <!-- Rollback Strategy -->
  <g transform="translate(50, 450)">
    <text x="350" y="0" text-anchor="middle" class="label" font-weight="bold">자동 롤백 전략</text>
    
    <rect x="50" y="20" width="200" height="100" class="box" fill="#ffebee"/>
    <text x="150" y="45" text-anchor="middle" class="label">롤백 조건</text>
    <text x="150" y="70" text-anchor="middle" class="small">• 에러율 > 1%</text>
    <text x="150" y="90" text-anchor="middle" class="small">• 응답시간 > 500ms</text>
    <text x="150" y="110" text-anchor="middle" class="small">• CPU > 80%</text>
    
    <rect x="280" y="20" width="200" height="100" class="box" fill="#fff3e0"/>
    <text x="380" y="45" text-anchor="middle" class="label">자동 롤백</text>
    <text x="380" y="70" text-anchor="middle" class="small">1. 트래픽 즉시 차단</text>
    <text x="380" y="90" text-anchor="middle" class="small">2. 기존 버전 복구</text>
    <text x="380" y="110" text-anchor="middle" class="small">3. 알림 발송</text>
    
    <rect x="510" y="20" width="200" height="100" class="box" fill="#e8f5e8"/>
    <text x="610" y="45" text-anchor="middle" class="label">복구 시간</text>
    <text x="610" y="75" text-anchor="middle" class="title" fill="#2e7d32">30초</text>
    <text x="610" y="100" text-anchor="middle" class="small">자동화된 복구</text>
    
    <path d="M 250 70 L 280 70" class="arrow"/>
    <path d="M 480 70 L 510 70" class="arrow"/>
  </g>
</svg>
